[
    {
        "id": "11380122.8a9007",
        "type": "tab",
        "label": "Telebot",
        "disabled": false,
        "info": ""
    },
    {
        "id": "b23f46b3.c31388",
        "type": "telegram receiver",
        "z": "11380122.8a9007",
        "name": "Receive",
        "bot": "413de0eb.3e3458",
        "saveDataDir": "",
        "x": 132.8333740234375,
        "y": 339.3333740234375,
        "wires": [
            [
                "7a35cfd2.72462",
                "59244043.7da6c"
            ],
            []
        ],
        "l": false
    },
    {
        "id": "58e2ec7.8f52094",
        "type": "telegram sender",
        "z": "11380122.8a9007",
        "name": "Send",
        "bot": "413de0eb.3e3458",
        "x": 1272.8333740234375,
        "y": 256.3333740234375,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "fee1af51.3a3c18",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.payload = msg.payload.content\nmsg.user = msg.chatId\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 455.8333740234375,
        "y": 327.3333740234375,
        "wires": [
            [
                "9d087feb.df55e8"
            ]
        ],
        "l": false
    },
    {
        "id": "9d087feb.df55e8",
        "type": "watson-conversation-v1",
        "z": "11380122.8a9007",
        "name": "WA",
        "workspaceid": "d0a7c1d8-9bdf-41ed-800e-0768e56067ff",
        "multiuser": true,
        "context": true,
        "empty-payload": false,
        "default-endpoint": false,
        "service-endpoint": "https://gateway-lon.watsonplatform.net/assistant/api",
        "timeout": "",
        "optout-learning": false,
        "x": 512.8333740234375,
        "y": 325.3333740234375,
        "wires": [
            [
                "42288428.e63d04"
            ]
        ],
        "l": false
    },
    {
        "id": "eb12a7ae.a5d3b8",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.payload = {\n    \"content\": \"I checked the weather for: \" + msg.loc + \"\\nLatitude and longitude are: \" + msg.lat + \", \" + msg.lng + \"\\nThe temperature right now feels like : \" + msg.temp + \"ï¿½C\\nThe forecast is: \" + msg.forecast,\n    \"chatId\" : msg.chatId,\n    \"type\"  : \"message\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1168.8333740234375,
        "y": 431.8333740234375,
        "wires": [
            [
                "58e2ec7.8f52094"
            ]
        ],
        "l": false
    },
    {
        "id": "48d10650.667c1",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.payload = {\n    \"chatId\" : msg.payload.chatId,\n    \"type\"   : \"message\",\n    \"content\": \"Hey there, I am Raphael's assistant. How can I help you?\\nYou can ask me for a weather forecast, or I can analyse pictures for you.\\nAlso, I can transcribe audio files for you or serve as a translator for EN/FR/DE.\"\n};\nglobal.set('task', \"\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 205.66671752929688,
        "y": 201.33335876464844,
        "wires": [
            [
                "58e2ec7.8f52094"
            ]
        ],
        "l": false
    },
    {
        "id": "73937248.81c644",
        "type": "telegram command",
        "z": "11380122.8a9007",
        "name": "/start",
        "command": "/start",
        "bot": "413de0eb.3e3458",
        "strict": false,
        "x": 138.66671752929688,
        "y": 208.33335876464844,
        "wires": [
            [
                "48d10650.667c1"
            ],
            []
        ],
        "l": false
    },
    {
        "id": "f1307281.23cda",
        "type": "weather_insights",
        "z": "11380122.8a9007",
        "name": "Weather ZH 48h",
        "host": "twcservice.mybluemix.net",
        "service": "/forecast/hourly/48hour.json",
        "geocode": "",
        "units": "m",
        "language": "en-US",
        "x": 1050.8333740234375,
        "y": 430.8333740234375,
        "wires": [
            [
                "53c834a7.96d39c"
            ]
        ],
        "l": false
    },
    {
        "id": "42288428.e63d04",
        "type": "switch",
        "z": "11380122.8a9007",
        "name": "",
        "property": "payload.output.action",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "null"
            },
            {
                "t": "eq",
                "v": "visualRecognition",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "speech-to-text",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "translation",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "weather",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 570.8333740234375,
        "y": 307.3333740234375,
        "wires": [
            [
                "8dfc3a93.5ff278"
            ],
            [
                "94da80a4.2722f"
            ],
            [
                "ac68bf1d.98cca"
            ],
            [
                "9f6f8c06.783aa8"
            ],
            [
                "e68190e3.580208"
            ]
        ],
        "l": false
    },
    {
        "id": "8dfc3a93.5ff278",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.payload = {\n    \"content\": msg.payload.output.text[0],\n    \"chatId\" : msg.chatId,\n    \"type\"  : \"message\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 658.8333740234375,
        "y": 234.3333740234375,
        "wires": [
            [
                "58e2ec7.8f52094"
            ]
        ],
        "l": false
    },
    {
        "id": "55dca3e9.8723d4",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.url = \"https://api.opencagedata.com/geocode/v1/json?q=\" + msg.loc + \"&key=REPLACE_WITH_YOUR_APIKEY&language=en&pretty=1\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 758.8333740234375,
        "y": 432.8333740234375,
        "wires": [
            [
                "d8c7d9a.ec76628"
            ]
        ],
        "l": false
    },
    {
        "id": "d8c7d9a.ec76628",
        "type": "http request",
        "z": "11380122.8a9007",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "authType": "basic",
        "x": 819.8333740234375,
        "y": 431.8333740234375,
        "wires": [
            [
                "c2fc8f78.f33aa"
            ]
        ],
        "l": false
    },
    {
        "id": "c2fc8f78.f33aa",
        "type": "json",
        "z": "11380122.8a9007",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 885.8333740234375,
        "y": 431.8333740234375,
        "wires": [
            [
                "ebe00e50.754fe8"
            ]
        ],
        "l": false
    },
    {
        "id": "e68190e3.580208",
        "type": "change",
        "z": "11380122.8a9007",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "loc",
                "pt": "msg",
                "to": "payload.context.location",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 699.8333740234375,
        "y": 433.8333740234375,
        "wires": [
            [
                "55dca3e9.8723d4"
            ]
        ],
        "l": false
    },
    {
        "id": "ebe00e50.754fe8",
        "type": "change",
        "z": "11380122.8a9007",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "lat",
                "pt": "msg",
                "to": "payload.results[0].geometry.lat",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "lng",
                "pt": "msg",
                "to": "payload.results[0].geometry.lng",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "loc",
                "pt": "msg",
                "to": "payload.results[0].formatted",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 947.8333740234375,
        "y": 430.8333740234375,
        "wires": [
            [
                "766c2aea.23abe4"
            ]
        ],
        "l": false
    },
    {
        "id": "766c2aea.23abe4",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.payload = msg.lat + \",\" + msg.lng;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1001.8333740234375,
        "y": 430.8333740234375,
        "wires": [
            [
                "f1307281.23cda"
            ]
        ],
        "l": false
    },
    {
        "id": "53c834a7.96d39c",
        "type": "change",
        "z": "11380122.8a9007",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp",
                "pt": "msg",
                "to": "forecasts[0][0].feels_like",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "forecast",
                "pt": "msg",
                "to": "forecasts[0][0].phrase_32char",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1112.8333740234375,
        "y": 430.8333740234375,
        "wires": [
            [
                "eb12a7ae.a5d3b8"
            ]
        ],
        "l": false
    },
    {
        "id": "59244043.7da6c",
        "type": "cloudant out",
        "z": "11380122.8a9007",
        "name": "",
        "cloudant": "",
        "database": "telebot_chats",
        "service": "",
        "payonly": false,
        "operation": "insert",
        "x": 137.83334350585938,
        "y": 439,
        "wires": [],
        "l": false
    },
    {
        "id": "a5e3b4c2.92a758",
        "type": "http in",
        "z": "11380122.8a9007",
        "name": "[GET]/telebot_chats",
        "url": "/telebot_chats",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 135.3333740234375,
        "y": 101.8333740234375,
        "wires": [
            [
                "6d94daf9.36ad84"
            ]
        ],
        "l": false
    },
    {
        "id": "6d94daf9.36ad84",
        "type": "cloudant in",
        "z": "11380122.8a9007",
        "name": "",
        "cloudant": "",
        "database": "telebot_chats",
        "service": "",
        "search": "_all_",
        "design": "",
        "index": "",
        "x": 199.3333740234375,
        "y": 102.8333740234375,
        "wires": [
            [
                "2a580820.ce29b8"
            ]
        ],
        "l": false
    },
    {
        "id": "2a580820.ce29b8",
        "type": "http response",
        "z": "11380122.8a9007",
        "name": "",
        "statusCode": "200",
        "headers": {
            "Content-Type": "application/json"
        },
        "x": 256.3333740234375,
        "y": 102.8333740234375,
        "wires": [],
        "l": false
    },
    {
        "id": "963586d.09b7478",
        "type": "visual-recognition-v3",
        "z": "11380122.8a9007",
        "name": "",
        "vr-service-endpoint": "https://gateway.watsonplatform.net/visual-recognition/api",
        "image-feature": "classifyImage",
        "lang": "en",
        "x": 593.0001220703125,
        "y": 516.6667175292969,
        "wires": [
            [
                "3a9c241d.e6b17c"
            ]
        ],
        "l": false
    },
    {
        "id": "47836d3.4531a14",
        "type": "switch",
        "z": "11380122.8a9007",
        "name": "",
        "property": "task",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "visualRecognition",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "speech-to-text",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "translation",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 357.8333740234375,
        "y": 335.3333740234375,
        "wires": [
            [
                "fee1af51.3a3c18"
            ],
            [
                "313e32f5.72b86e"
            ],
            [
                "1e7c41e6.03877e"
            ],
            [
                "e500b4de.4e646"
            ]
        ],
        "l": false
    },
    {
        "id": "d6360e7b.ec7cc",
        "type": "change",
        "z": "11380122.8a9007",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.weblink",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 534.0001220703125,
        "y": 517.6667175292969,
        "wires": [
            [
                "963586d.09b7478"
            ]
        ],
        "l": false
    },
    {
        "id": "3a9c241d.e6b17c",
        "type": "change",
        "z": "11380122.8a9007",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "firstPrioClass",
                "pt": "msg",
                "to": "result.images[0].classifiers[0].classes[0].class",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "firstPrioScore",
                "pt": "msg",
                "to": "result.images[0].classifiers[0].classes[0].score",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "secondPrioClass",
                "pt": "msg",
                "to": "result.images[0].classifiers[0].classes[1].class",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "secondPrioScore",
                "pt": "msg",
                "to": "result.images[0].classifiers[0].classes[1].score",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "thirdPrioClass",
                "pt": "msg",
                "to": "result.images[0].classifiers[0].classes[2].class",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "thirdPrioScore",
                "pt": "msg",
                "to": "result.images[0].classifiers[0].classes[2].score",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 698.0001220703125,
        "y": 519.6667175292969,
        "wires": [
            [
                "97e66c42.e25158"
            ]
        ],
        "l": false
    },
    {
        "id": "97e66c42.e25158",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.payload = {\n    \"content\": \"Here are the top 3 results I found:\\nScore    | Detection\\n\" + (msg.firstPrioScore*100).toFixed(2) + \"% | \" + msg.firstPrioClass + \"\\n\" + (msg.secondPrioScore*100).toFixed(2) + \"% | \" + msg.secondPrioClass + \"\\n\" +(msg.thirdPrioScore*100).toFixed(2) + \"% | \" + msg.thirdPrioClass,\n    \"chatId\" : msg.chatId,\n    \"type\"  : \"message\"\n};\nglobal.set('task', \"\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1165.0001220703125,
        "y": 510.6667175292969,
        "wires": [
            [
                "58e2ec7.8f52094"
            ]
        ],
        "l": false
    },
    {
        "id": "6eb86b12.354194",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.chatId = msg.payload.chatId\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 283.8333740234375,
        "y": 334.3333740234375,
        "wires": [
            [
                "47836d3.4531a14"
            ]
        ],
        "l": false
    },
    {
        "id": "94da80a4.2722f",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "global.set('task', 'visualRecognition');\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 659.8333740234375,
        "y": 271.3333740234375,
        "wires": [
            [
                "8dfc3a93.5ff278"
            ]
        ],
        "l": false
    },
    {
        "id": "313e32f5.72b86e",
        "type": "switch",
        "z": "11380122.8a9007",
        "name": "",
        "property": "payload.weblink",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 486.0001220703125,
        "y": 547.6667175292969,
        "wires": [
            [
                "d6360e7b.ec7cc"
            ],
            [
                "269ccb2b.2ee594"
            ]
        ],
        "l": false
    },
    {
        "id": "269ccb2b.2ee594",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.payload = {\n    \"content\": \"I couldn't analyse this. Let's start over again\",\n    \"chatId\" : msg.chatId,\n    \"type\"  : \"message\"\n};\nglobal.set('task', \"\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1164.0001220703125,
        "y": 543.6667175292969,
        "wires": [
            [
                "58e2ec7.8f52094"
            ]
        ],
        "l": false
    },
    {
        "id": "7a35cfd2.72462",
        "type": "switch",
        "z": "11380122.8a9007",
        "name": "",
        "property": "payload.content",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "/start",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/start",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 215.8333740234375,
        "y": 333.3333740234375,
        "wires": [
            [
                "6eb86b12.354194"
            ],
            []
        ],
        "l": false
    },
    {
        "id": "ac68bf1d.98cca",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "global.set('task', 'speech-to-text');\nglobal.set('lang', msg.payload.context.language);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 659.8333740234375,
        "y": 308.3333740234375,
        "wires": [
            [
                "8dfc3a93.5ff278"
            ]
        ],
        "l": false
    },
    {
        "id": "1bead733.3fb8a9",
        "type": "change",
        "z": "11380122.8a9007",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.weblink",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 555.318359375,
        "y": 662.3940734863281,
        "wires": [
            [
                "7fc4fea6.ccb958"
            ]
        ],
        "l": false
    },
    {
        "id": "1e7c41e6.03877e",
        "type": "switch",
        "z": "11380122.8a9007",
        "name": "",
        "property": "payload.weblink",
        "propertyType": "msg",
        "rules": [
            {
                "t": "null"
            },
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 465.2274169921875,
        "y": 654.39404296875,
        "wires": [
            [
                "269ccb2b.2ee594"
            ],
            [
                "1bead733.3fb8a9"
            ]
        ],
        "l": false
    },
    {
        "id": "ad236ef0.9c7368",
        "type": "watson-speech-to-text",
        "z": "11380122.8a9007",
        "name": "",
        "alternatives": 1,
        "speakerlabels": false,
        "smartformatting": false,
        "lang": "en-US",
        "langhidden": "",
        "langcustom": "",
        "langcustomhidden": "",
        "custom-weight": "0.5",
        "band": "BroadbandModel",
        "bandhidden": "",
        "keywords": "",
        "keywords-threshold": "0.5",
        "word-confidence": false,
        "password": "",
        "apikey": "gXU3kwaJt_HEnlj85rlM5bN3wl0Xn1Q3oTrZTuUBdEnX",
        "payload-response": true,
        "streaming-mode": false,
        "streaming-mute": true,
        "auto-connect": false,
        "discard-listening": false,
        "disable-precheck": false,
        "default-endpoint": false,
        "service-endpoint": "https://gateway-lon.watsonplatform.net/speech-to-text/api",
        "x": 859.2274169921875,
        "y": 651.39404296875,
        "wires": [
            [
                "5a41f86e.e8b53",
                "dd3d903f.f636b8"
            ]
        ],
        "l": false
    },
    {
        "id": "7fc4fea6.ccb958",
        "type": "ffmpeg-conversion",
        "z": "11380122.8a9007",
        "name": "",
        "format": "wav",
        "audiochannels": "stereo",
        "x": 627.2274169921875,
        "y": 662.39404296875,
        "wires": [
            [
                "a9a5c9d0.08ed2"
            ]
        ],
        "l": false
    },
    {
        "id": "5a41f86e.e8b53",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.payload = {\n    \"content\": \"I understood the following:\",\n    \"chatId\" : msg.chatId,\n    \"type\"  : \"message\"\n};\nglobal.set('task', \"\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1144.2274169921875,
        "y": 649.39404296875,
        "wires": [
            [
                "58e2ec7.8f52094"
            ]
        ],
        "l": false
    },
    {
        "id": "28b1afa4.de5d18",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.srclang = \"en\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 766.2274169921875,
        "y": 650.39404296875,
        "wires": [
            [
                "ad236ef0.9c7368"
            ]
        ],
        "l": false
    },
    {
        "id": "e7cc7831.4deb5",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.srclang = \"fr\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 765.2274169921875,
        "y": 681.39404296875,
        "wires": [
            [
                "ad236ef0.9c7368"
            ]
        ],
        "l": false
    },
    {
        "id": "7a15f7c4.60dad8",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.srclang = \"de\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 764.2274169921875,
        "y": 714.39404296875,
        "wires": [
            [
                "ad236ef0.9c7368"
            ]
        ],
        "l": false
    },
    {
        "id": "a9a5c9d0.08ed2",
        "type": "switch",
        "z": "11380122.8a9007",
        "name": "",
        "property": "lang",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "English",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "French",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "German",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Spanish",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Japanese",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Korean",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Chinese",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Arabic",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 679.2274169921875,
        "y": 689.39404296875,
        "wires": [
            [
                "28b1afa4.de5d18"
            ],
            [
                "e7cc7831.4deb5"
            ],
            [
                "7a15f7c4.60dad8"
            ],
            [
                "8c369ab5.05d558"
            ],
            [
                "365cc7ee.25f42"
            ],
            [
                "c2a2e128.548b58"
            ],
            [
                "fe6b7f25.137fa"
            ],
            [
                "a8458a46.409b4"
            ]
        ],
        "l": false
    },
    {
        "id": "5b2d863f.b3b3e",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.payload = {\n    \"content\": msg.payload,\n    \"chatId\" : msg.chatId,\n    \"type\"  : \"message\"\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1144.2274169921875,
        "y": 682.39404296875,
        "wires": [
            [
                "58e2ec7.8f52094"
            ]
        ],
        "l": false
    },
    {
        "id": "dd3d903f.f636b8",
        "type": "delay",
        "z": "11380122.8a9007",
        "name": "",
        "pauseType": "delay",
        "timeout": "200",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1088.7274169921875,
        "y": 684.39404296875,
        "wires": [
            [
                "5b2d863f.b3b3e"
            ]
        ],
        "l": false
    },
    {
        "id": "9f6f8c06.783aa8",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "global.set('task', 'translation');\nglobal.set('lang', msg.payload.context.language);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 660.8333740234375,
        "y": 343.3333740234375,
        "wires": [
            [
                "8dfc3a93.5ff278"
            ]
        ],
        "l": false
    },
    {
        "id": "e500b4de.4e646",
        "type": "change",
        "z": "11380122.8a9007",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.content",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 468.8941650390625,
        "y": 953.6515808105469,
        "wires": [
            [
                "3a9633a7.c16c74"
            ]
        ],
        "l": false
    },
    {
        "id": "3a9633a7.c16c74",
        "type": "watson-language-translator-identify",
        "z": "11380122.8a9007",
        "name": "",
        "default-endpoint": false,
        "service-endpoint": "https://gateway-lon.watsonplatform.net/language-translator/api",
        "x": 530.8941650390625,
        "y": 953.6515808105469,
        "wires": [
            [
                "1c68831.d6ccc7d"
            ]
        ],
        "l": false
    },
    {
        "id": "e6105b3c.3616e",
        "type": "telegram command",
        "z": "11380122.8a9007",
        "name": "/reset",
        "command": "/reset",
        "bot": "413de0eb.3e3458",
        "strict": false,
        "x": 139.66671752929688,
        "y": 252.33335876464844,
        "wires": [
            [
                "48d10650.667c1"
            ],
            []
        ],
        "l": false
    },
    {
        "id": "308dd15.30c2d2e",
        "type": "change",
        "z": "11380122.8a9007",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "destlang",
                "pt": "msg",
                "to": "de",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "srclang",
                "pt": "msg",
                "to": "lang.language",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 679.8941650390625,
        "y": 954.6515808105469,
        "wires": [
            [
                "7f1880ed.8a24c"
            ]
        ],
        "l": false
    },
    {
        "id": "7f1880ed.8a24c",
        "type": "watson-translator",
        "z": "11380122.8a9007",
        "name": "",
        "action": "translate",
        "basemodel": "en-tr",
        "domain": "general",
        "srclang": "es",
        "destlang": "en",
        "password": "",
        "apikey": "l1hKpdwt5jcmswmSa0JoZEZzAmagxxuQLkWfhCveceOo",
        "custom": "",
        "domainhidden": "general",
        "srclanghidden": "es",
        "destlanghidden": "en",
        "basemodelhidden": "en-tr",
        "customhidden": "",
        "filetype": "forcedglossary",
        "trainid": "",
        "lgparams2": true,
        "neural": false,
        "default-endpoint": false,
        "service-endpoint": "https://gateway-lon.watsonplatform.net/language-translator/api",
        "x": 758.8941650390625,
        "y": 947.6515808105469,
        "wires": [
            [
                "1c8571f8.866396",
                "80e3e01.e2395a"
            ]
        ],
        "l": false
    },
    {
        "id": "80e3e01.e2395a",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.payload = {\n    \"content\": \"Here is my translation:\",\n    \"chatId\" : msg.chatId,\n    \"type\"  : \"message\"\n};\nglobal.set('task', '');\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1154.8941650390625,
        "y": 940.6515808105469,
        "wires": [
            [
                "58e2ec7.8f52094"
            ]
        ],
        "l": false
    },
    {
        "id": "21345e20.2badb2",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.payload = {\n    \"content\": msg.payload,\n    \"chatId\" : msg.chatId,\n    \"type\"  : \"message\"\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1157.8941650390625,
        "y": 977.6515808105469,
        "wires": [
            [
                "58e2ec7.8f52094"
            ]
        ],
        "l": false
    },
    {
        "id": "1c8571f8.866396",
        "type": "delay",
        "z": "11380122.8a9007",
        "name": "",
        "pauseType": "delay",
        "timeout": "200",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1102.3941650390625,
        "y": 979.6515808105469,
        "wires": [
            [
                "21345e20.2badb2"
            ]
        ],
        "l": false
    },
    {
        "id": "1c68831.d6ccc7d",
        "type": "switch",
        "z": "11380122.8a9007",
        "name": "",
        "property": "lang",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "English",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "German",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "French",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 607.8941650390625,
        "y": 952.6515808105469,
        "wires": [
            [
                "fa74c767.d61688"
            ],
            [
                "308dd15.30c2d2e"
            ],
            [
                "12fc7280.4afb16"
            ]
        ],
        "l": false
    },
    {
        "id": "fa74c767.d61688",
        "type": "change",
        "z": "11380122.8a9007",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "destlang",
                "pt": "msg",
                "to": "en",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "srclang",
                "pt": "msg",
                "to": "lang.language",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 678.8941650390625,
        "y": 922.6515808105469,
        "wires": [
            [
                "7f1880ed.8a24c"
            ]
        ],
        "l": false
    },
    {
        "id": "12fc7280.4afb16",
        "type": "change",
        "z": "11380122.8a9007",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "destlang",
                "pt": "msg",
                "to": "fr",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "srclang",
                "pt": "msg",
                "to": "lang.language",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 679.8941650390625,
        "y": 984.6515808105469,
        "wires": [
            [
                "7f1880ed.8a24c"
            ]
        ],
        "l": false
    },
    {
        "id": "8c369ab5.05d558",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.srclang = \"es\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 765.2274169921875,
        "y": 746.39404296875,
        "wires": [
            [
                "ad236ef0.9c7368"
            ]
        ],
        "l": false
    },
    {
        "id": "365cc7ee.25f42",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.srclang = \"ja\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 765.2274169921875,
        "y": 777.39404296875,
        "wires": [
            [
                "ad236ef0.9c7368"
            ]
        ],
        "l": false
    },
    {
        "id": "c2a2e128.548b58",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.srclang = \"ko\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 765.2274169921875,
        "y": 807.39404296875,
        "wires": [
            [
                "ad236ef0.9c7368"
            ]
        ],
        "l": false
    },
    {
        "id": "fe6b7f25.137fa",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.srclang = \"zh\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 765.2274169921875,
        "y": 838.39404296875,
        "wires": [
            [
                "ad236ef0.9c7368"
            ]
        ],
        "l": false
    },
    {
        "id": "a8458a46.409b4",
        "type": "function",
        "z": "11380122.8a9007",
        "name": "",
        "func": "msg.srclang = \"ar\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 763.2274169921875,
        "y": 868.39404296875,
        "wires": [
            [
                "ad236ef0.9c7368"
            ]
        ],
        "l": false
    },
    {
        "id": "445b0f05.f1164",
        "type": "comment",
        "z": "11380122.8a9007",
        "name": "Query the database",
        "info": "",
        "x": 204.1666259765625,
        "y": 59.16666030883789,
        "wires": []
    },
    {
        "id": "917cd6ca.82d598",
        "type": "comment",
        "z": "11380122.8a9007",
        "name": "Store user input in database",
        "info": "",
        "x": 211.66661071777344,
        "y": 478.3332214355469,
        "wires": []
    },
    {
        "id": "52624821.5b4b4",
        "type": "comment",
        "z": "11380122.8a9007",
        "name": "Incoming messages",
        "info": "",
        "x": 204.99996948242188,
        "y": 301.6666564941406,
        "wires": []
    },
    {
        "id": "d5a644dc.17fb8",
        "type": "comment",
        "z": "11380122.8a9007",
        "name": "/start and /reset commands",
        "info": "",
        "x": 237.5,
        "y": 166.6666717529297,
        "wires": []
    },
    {
        "id": "619be0c.14d392",
        "type": "comment",
        "z": "11380122.8a9007",
        "name": "Translation path",
        "info": "",
        "x": 520.2273559570312,
        "y": 881.8181457519531,
        "wires": []
    },
    {
        "id": "4bbc116a.4fb6e8",
        "type": "comment",
        "z": "11380122.8a9007",
        "name": "Speech to Text path",
        "info": "",
        "x": 537.7273559570312,
        "y": 610.2273559570312,
        "wires": []
    },
    {
        "id": "406d9a8d.eb5314",
        "type": "comment",
        "z": "11380122.8a9007",
        "name": "Visual Recognition path",
        "info": "",
        "x": 542.5,
        "y": 470.83331298828125,
        "wires": []
    },
    {
        "id": "725411af.2b30a8",
        "type": "comment",
        "z": "11380122.8a9007",
        "name": "Weather forecast path",
        "info": "",
        "x": 779.1666259765625,
        "y": 387.4999542236328,
        "wires": []
    },
    {
        "id": "14006301.814945",
        "type": "comment",
        "z": "11380122.8a9007",
        "name": "Sending message to Bot",
        "info": "",
        "x": 1354.166748046875,
        "y": 217.5,
        "wires": []
    },
    {
        "id": "413de0eb.3e3458",
        "type": "telegram bot",
        "z": "",
        "botname": "Raphael's Assistant",
        "usernames": "",
        "chatids": "",
        "baseapiurl": "",
        "updatemode": "polling",
        "pollinterval": "300",
        "usesocks": false,
        "sockshost": "",
        "socksport": "6667",
        "socksusername": "anonymous",
        "sockspassword": "",
        "bothost": "",
        "localbotport": "8443",
        "publicbotport": "8443",
        "privatekey": "",
        "certificate": "",
        "useselfsignedcertificate": false,
        "verboselogging": false
    }
]
